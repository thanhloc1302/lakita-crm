function check_rule_call_stt(_,t){return(_!=_SO_MAY_SAI_&&_!=_KHONG_NGHE_MAY_&&_!=_NHAM_MAY_||t==_CHUA_CHAM_SOC_)&&(_!=_DA_LIEN_LAC_DUOC_||t!=_CHUA_CHAM_SOC_)}function check_rule_call_stt_and_date_recall(_,t,n){return!(!stop_care(_,t)||!now_greater_than_input_date(n))}function stop_care(_,t){return _==_SO_MAY_SAI_||_==_NHAM_MAY_||_==_KHONG_NGHE_MAY_||t==_DONG_Y_MUA_||t==_TU_CHOI_MUA_||t==_CONTACT_CHET_}function now_greater_than_input_date(_){var t=_.split(/-/),n=t[2],e=t[1],a=t[0],r=new Date;r=r.getTime();var c=new Date(n,e-1,a);return c=c.getTime(),r>c}var _SO_MAY_SAI_=1,_KHONG_NGHE_MAY_=2,_NHAM_MAY_=3,_DA_LIEN_LAC_DUOC_=4,_CONTACT_CHET_=5,_CHUA_CHAM_SOC_=0,_TU_CHOI_MUA_=3,_DONG_Y_MUA_=4;$(document).on("click",".btn-edit-contact",function(_){_.preventDefault();var t=!1,n=$("select[name='call_status_id']").val();console.log("call_status_id= "+n);var e=$("select[name='ordering_status_id']").val();console.log("ordering_status_id= "+e);var a=$(".date_recall").val(),r=$("select.select_course_code").val(),c=$('[name="price_purchase"]').val();if(0==$("select.edit_payment_method_rgt").val())return alert("Bạn cần cập nhật hình thức thanh toán!"),t=!0,!1;if(0==n)return alert("Bạn cần cập nhật trạng thái gọi!"),t=!0,!1;if(0==check_rule_call_stt(n,e))return alert("Trạng thái gọi và trạng thái đơn hàng không logic!"),t=!0,!1;if(""!=a){if(now_greater_than_input_date(a))return alert("Ngày gọi lại không thể là một ngày trước ngày hôm nay!"),t=!0,!1;if(check_rule_call_stt_and_date_recall(n,e,a))return alert("Nếu contact không liên lạc được hoặc không thể chăm sóc được nữa thì không thể có ngày gọi lại lớn hơn ngày hiện tại!"),t=!0,!1}return"0"==r?(alert("Vui lòng chọn mã khóa học!"),t=!0,!1):""==c?(alert("Vui lòng chọn giá tiền mua!"),t=!0,!1):void(t||$(".form_submit").submit())});