{"version":3,"sources":["noti_contact_recall.js"],"names":["$","url","val","i","noti","ajax","type","dataType","success","html","data","num_noti","content_noti","each","contacts_noti","id","name","phone","date_recall","originTitle","text","substring","title","sound","play","notify","Notification","body","icon","tag","image","setInterval"],"mappings":";;AAAAA,EAAE,YAAY;AACV,QAAIC,MAAMD,EAAE,WAAF,EAAeE,GAAf,KAAuB,0BAAjC;AACA,QAAIC,IAAI,CAAR;AACAC,WAAO,gBAAM;AACTJ,UAAEK,IAAF,CAAO;AACHJ,iBAAKA,GADF;AAEHK,kBAAM,MAFH;AAGHC,sBAAU,MAHP;AAIHC,qBAAS,uBAAQ;AACbR,kBAAE,WAAF,EAAeS,IAAf,CAAoBC,KAAKC,QAAzB;AACA,oBAAIC,iBAAJ;AACAZ,kBAAEa,IAAF,CAAOH,KAAKI,aAAZ,EAA2B,YAAY;AACnCF;AACAA,2FAAgE,KAAKG,EAArE,qFAC4C,KAAKC,IADjD,YAC4D,KAAKC,KADjE,4CAC8F,KAAKC,WADnG;AAGAN;AACH,iBAND;AAOAZ,kBAAE,sBAAF,EAA0BS,IAA1B,CAA+BG,YAA/B;AACA,oBAAIO,cAAc,EAAlB;AACA,oBAAIT,KAAKC,QAAL,GAAgB,CAApB,EAAuB;AACnB,wBAAIR,QAAQ,CAAZ,EAAe;AACXgB,sCAAc,qBAAd;AACH,qBAFD,MAEO;AACHA,sCAAcnB,EAAE,OAAF,EAAWoB,IAAX,GAAkBC,SAAlB,CAA4B,CAA5B,CAAd;AACH;AACD,wBAAIC,QAAQ,MAAMZ,KAAKC,QAAX,GAAsB,IAAtB,GAA6BQ,WAAzC;AACAnB,sBAAE,OAAF,EAAWoB,IAAX,CAAgBE,KAAhB;AACH;AACD,oBAAI,OAAOZ,KAAKa,KAAZ,KAAsB,WAA1B,EAAuC;AACnCvB,sBAAE,mBAAF,EAAuB,CAAvB,EAA0BwB,IAA1B;AACAC,6BAAS,IAAIC,YAAJ,CACD,wBADC,EAED;AACIC,8BAAM,4BADV;AAEIC,8BAAM5B,EAAE,WAAF,EAAeE,GAAf,KAAuB,yBAFjC;AAGI2B,6BAAK,8CAHT;AAIIN,+BAAOvB,EAAE,WAAF,EAAeE,GAAf,KAAuB,4BAJlC;AAKI4B,+BAAO9B,EAAE,WAAF,EAAeE,GAAf,KAAuB;AALlC,qBAFC,CAAT;AAUH;AACJ;AAtCE,SAAP;AAwCH,KAzCD;AA0CA6B,gBAAY3B,IAAZ,EAAkB,KAAlB;AACH,CA9CD","file":"noti2.js","sourcesContent":["$(function () {\r\n    var url = $(\"#base_url\").val() + \"sale/noti_contact_recall\";\r\n    var i = 0;\r\n    noti = () => {\r\n        $.ajax({\r\n            url: url,\r\n            type: \"POST\",\r\n            dataType: 'json',\r\n            success: data => {\r\n                $('#num_noti').html(data.num_noti);\r\n                var content_noti = ``;\r\n                $.each(data.contacts_noti, function () {\r\n                    content_noti += `<li class=\"content_noti\">`;\r\n                    content_noti += `<a href=\"#\" class=\"edit_contact\" contact_id=\"${this.id}\" \r\n                                    title=\"Chăm sóc contact\"> ${this.name}  - ${this.phone} - Thời gian gọi lại ${this.date_recall} \r\n                                    </a>`;\r\n                    content_noti += `</li>`;\r\n                });\r\n                $('#noti_contact_recall').html(content_noti);\r\n                var originTitle = '';\r\n                if (data.num_noti > 0) {\r\n                    if (i++ === 0) {\r\n                        originTitle = 'CONTACT CẦN GỌI LẠI';\r\n                    } else {\r\n                        originTitle = $(\"title\").text().substring(3);\r\n                    }\r\n                    var title = '(' + data.num_noti + ') ' + originTitle;\r\n                    $(\"title\").text(title);\r\n                }\r\n                if (typeof data.sound !== 'undefined') {\r\n                    $(\"#notificate_sound\")[0].play();\r\n                    notify = new Notification(\r\n                            'Có contact mới đăng ký',\r\n                            {\r\n                                body: 'Click vào đây để xem ngay!',\r\n                                icon: $(\"#base_url\").val() + 'public/images/logo2.png',\r\n                                tag: 'http://crm2.lakita.vn/quan-ly/trang-chu.html',\r\n                                sound: $(\"#base_url\").val() + 'public/mp3/new-contact.mp3',\r\n                                image: $(\"#base_url\").val() + 'public/images/recall.jpg'\r\n                            }\r\n                    );\r\n                }\r\n            }\r\n        });\r\n    };\r\n    setInterval(noti, 10000);\r\n});"]}